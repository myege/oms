<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.what21.dao.OrderPushDao">
	<resultMap type="OrderPush" id="orderResultMap">
		<id property="id" column="id"/>
		<result property="orderNumber" column="orderNumber"/>
		<result property="expressCode" column="expressCode"/>
		<result property="expressNumber" column="expressNumber"/>
		<result property="buyerNickName" column="buyerNickName"/>
		<result property="buyerName" column="buyerName"/>
		<result property="buyerIdCard" column="buyerIdCard"/>
		<result property="buyerProvince" column="buyerProvince"/>
		<result property="buyerCity" column="buyerCity"/>
		<result property="buyerArea" column="buyerArea"/>
		<result property="buyerAddress" column="buyerAddress"/>
		<result property="buyerPostCode" column="buyerPostCode"/>
		<result property="buyerCountry" column="buyerCountry"/> 
		<result property="buyerTel" column="buyerTel"/>
		<result property="pushType" column="pushType"/>
		<result property="userId" column="userId"/>
	</resultMap>
	<insert id="insert" parameterType="OrderPush">
		INSERT INTO t_order_push (orderNumber, expressCode, expressNumber, buyerNickName, 
		buyerName, buyerIdCard, buyerProvince, buyerCity, buyerArea, buyerAddress, 
		buyerPostCode, buyerCountry, buyerTel, pushType, userId) 
		VALUES (#{orderNumber}, #{expressCode}, #{expressNumber}, #{buyerNickName}, 
		#{buyerName}, #{buyerIdCard}, #{buyerProvince}, #{buyerCity}, #{buyerArea}, 
		#{buyerAddress}, #{buyerPostCode}, #{buyerCountry}, #{buyerTel}, #{pushType}, #{userId})
	</insert>
	<select id="findByExpressNumber" resultMap="orderResultMap" parameterType="String">
		select * from t_order_push where expressNumber = #{expressNumber}
	</select>
	<select id="findById" resultMap="orderResultMap" parameterType="Integer">
		select * from t_order_push where id = #{id}
	</select>
	<select id="findAll" resultMap="orderResultMap" parameterType="java.util.Map">
		select * from t_order_push where 1=1
		<if test="map.userId != null and map.userId != 0">
          	and userId = #{map.userId} 
        </if>
        order by pushType 
        LIMIT #{map.startPage},#{map.endPage} 
	</select>
	<select id="count" resultType="java.lang.Integer" parameterType="Integer">
		select count(1) from t_order_push where 1=1
		<if test="userId != null and userId != 0">
          	and userId = #{userId} 
        </if>
	</select>
	<select id="findByPushType" resultMap="orderResultMap" parameterType="Integer">
		select * from t_order_push where pushType = #{pushType}
	</select>
	<update id="update" parameterType="String">
		update t_order_push set pushType=1 where expressNumber = #{expressNumber}
	</update>
</mapper>